// nanomatch@1.2.13 downloaded from https://ga.jspm.io/npm:nanomatch@1.2.13/index.js

import t from"util";import e from"to-regex";import r from"extend-shallow";import a from"regex-not";import n from"fragment-cache";import i from"path";import s from"is-windows";import o from"snapdragon";import u from"define-property";import c from"arr-diff";import h from"object.pick";import p from"kind-of";import f from"array-unique";var v={};v=function(t,e){function slash(){return e&&"string"===typeof e.slash?e.slash:e&&"function"===typeof e.slash?e.slash.call(t):"\\\\/"}function star(){return e&&"string"===typeof e.star?e.star:e&&"function"===typeof e.star?e.star.call(t):"[^"+slash()+"]*?"}var r=t.ast=t.parser.ast;r.state=t.parser.state;t.compiler.state=r.state;t.compiler.set("not",(function(t){var e=this.prev();return true===this.options.nonegate||"bos"!==e.type?this.emit("\\"+t.val,t):this.emit(t.val,t)})).set("escape",(function(t){return this.options.unescape&&/^[-\w_.]/.test(t.val)?this.emit(t.val,t):this.emit("\\"+t.val,t)})).set("quoted",(function(t){return this.emit(t.val,t)})).set("dollar",(function(t){return"bracket"===t.parent.type?this.emit(t.val,t):this.emit("\\"+t.val,t)})).set("dot",(function(t){true===t.dotfiles&&(this.dotfiles=true);return this.emit("\\"+t.val,t)})).set("backslash",(function(t){return this.emit(t.val,t)})).set("slash",(function(t,e,r){var a="["+slash()+"]";var n=t.parent;var i=this.prev();while("paren"===n.type&&!n.hasSlash){n.hasSlash=true;n=n.parent}i.addQmark&&(a+="?");if("\\b"===t.rest.slice(0,2))return this.emit(a,t);if("**"===t.parsed||"./**"===t.parsed){this.output="(?:"+this.output;return this.emit(a+")?",t)}return"!**"===t.parsed&&true!==this.options.nonegate?this.emit(a+"?\\b",t):this.emit(a,t)})).set("bracket",(function(t){var e=t.close;var r=t.escaped?"\\[":"[";var a=t.negated;var n=t.inner;var i=t.val;if(true===t.escaped){n=n.replace(/\\?(\W)/g,"\\$1");a=""}"]-"===n&&(n="\\]\\-");a&&-1===n.indexOf(".")&&(n+=".");a&&-1===n.indexOf("/")&&(n+="/");i=r+a+n+e;return this.emit(i,t)})).set("square",(function(t){var e=(/^\W/.test(t.val)?"\\":"")+t.val;return this.emit(e,t)})).set("qmark",(function(t){var e=this.prev();var r="[^.\\\\/]";(this.options.dot||"bos"!==e.type&&"slash"!==e.type)&&(r="[^\\\\/]");if("("===t.parsed.slice(-1)){var a=t.rest.charAt(0);if("!"===a||"="===a||":"===a)return this.emit(t.val,t)}t.val.length>1&&(r+="{"+t.val.length+"}");return this.emit(r,t)})).set("plus",(function(t){var e=t.parsed.slice(-1);if("]"===e||")"===e)return this.emit(t.val,t);if(!this.output||/[?*+]/.test(r)&&"bracket"!==t.parent.type)return this.emit("\\+",t);var r=this.output.slice(-1);return/\w/.test(r)&&!t.inside?this.emit("+\\+?",t):this.emit("+",t)})).set("globstar",(function(t,e,r){this.output||(this.state.leadingGlobstar=true);var a=this.prev();var n=this.prev(2);var i=this.next();var s=this.next(2);var o=a.type;var u=t.val;if("slash"===a.type&&"slash"===i.type&&"text"===n.type){this.output+="?";"text"!==s.type&&(this.output+="\\b")}var c=t.parsed;"!"===c.charAt(0)&&(c=c.slice(1));var h=t.isInside.paren||t.isInside.brace;u=c&&"slash"!==o&&"bos"!==o&&!h?star():true!==this.options.dot?"(?:(?!(?:["+slash()+"]|^)\\.).)*?":"(?:(?!(?:["+slash()+"]|^)(?:\\.{1,2})($|["+slash()+"]))(?!\\.{2}).)*?";"slash"!==o&&"bos"!==o||true===this.options.dot||(u="(?!\\.)"+u);"slash"===a.type&&"slash"===i.type&&"text"!==n.type&&("text"!==s.type&&"star"!==s.type||(t.addQmark=true));this.options.capture&&(u="("+u+")");return this.emit(u,t)})).set("star",(function(t,e,r){var a=e[r-2]||{};var n=this.prev();var i=this.next();var s=n.type;function isStart(t){return"bos"===t.type||"slash"===t.type}""===this.output&&true!==this.options.contains&&(this.output="(?!["+slash()+"])");if("bracket"===s&&false===this.options.bash){var o=i&&"bracket"===i.type?star():"*?";if(!n.nodes||"posix"!==n.nodes[1].type)return this.emit(o,t)}var u=this.dotfiles||"text"===s||"escape"===s?"":this.options.dot?"(?!(?:^|["+slash()+"])\\.{1,2}(?:$|["+slash()+"]))":"(?!\\.)";isStart(n)||isStart(a)&&"not"===s?u+="(?!\\.)"!==u?"(?!(\\.{2}|\\.["+slash()+"]))(?=.)":"(?=.)":"(?!\\.)"===u&&(u="");"not"===n.type&&"bos"===a.type&&true===this.options.dot&&(this.output="(?!\\.)"+this.output);var c=u+star();this.options.capture&&(c="("+c+")");return this.emit(c,t)})).set("text",(function(t){return this.emit(t.val,t)})).set("eos",(function(t){var e=this.prev();var r=t.val;this.output="(?:\\.["+slash()+"](?=.))?"+this.output;this.state.metachar&&"qmark"!==e.type&&"slash"!==e.type&&(r+=this.options.contains?"["+slash()+"]?":"(?:["+slash()+"]|$)");return this.emit(r,t)}));e&&"function"===typeof e.compilers&&e.compilers(t.compiler)};var l=v;var m={};var y=a;var d=e;var g;var x="[\\[!*+?$^\"'.\\\\/]+";var b=createTextRegex(x);m=function(t,e){var r=t.parser;var a=r.options;r.state={slashes:0,paths:[]};r.ast.state=r.state;r.capture("prefix",(function(){if(!this.parsed){var t=this.match(/^\.[\\/]/);if(t){this.state.strictOpen=!!this.options.strictOpen;this.state.addPrefix=true}}})).capture("escape",(function(){if(!this.isInside("bracket")){var t=this.position();var e=this.match(/^(?:\\(.)|([$^]))/);if(e)return t({type:"escape",val:e[2]||e[1]})}})).capture("quoted",(function(){var t=this.position();var e=this.match(/^["']/);if(e){var r=e[0];if(-1===this.input.indexOf(r))return t({type:"escape",val:r});var a=advanceTo(this.input,r);this.consume(a.len);return t({type:"quoted",val:a.esc})}})).capture("not",(function(){var t=this.parsed;var e=this.position();var r=this.match(this.notRegex||/^!+/);if(r){var a=r[0];var n=a.length%2===1;""!==t||n||(a="");if(""===t&&n&&true!==this.options.nonegate){this.bos.val="(?!^(?:";this.append=")$).*";a=""}return e({type:"not",val:a})}})).capture("dot",(function(){var t=this.parsed;var e=this.position();var r=this.match(/^\.+/);if(r){var a=r[0];this.state.dot="."===a&&(""===t||"/"===t.slice(-1));return e({type:"dot",dotfiles:this.state.dot,val:a})}})).capture("plus",/^\+(?!\()/).capture("qmark",(function(){var t=this.parsed;var e=this.position();var r=this.match(/^\?+(?!\()/);if(r){this.state.metachar=true;this.state.qmark=true;return e({type:"qmark",parsed:t,val:r[0]})}})).capture("globstar",(function(){var t=this.parsed;var e=this.position();var r=this.match(/^\*{2}(?![*(])(?=[,)/]|$)/);if(r){var n=true!==a.noglobstar?"globstar":"star";var i=e({type:n,parsed:t});this.state.metachar=true;while("/**/"===this.input.slice(0,4))this.input=this.input.slice(3);i.isInside={brace:this.isInside("brace"),paren:this.isInside("paren")};if("globstar"===n){this.state.globstar=true;i.val="**"}else{this.state.star=true;i.val="*"}return i}})).capture("star",(function(){var t=this.position();var e=/^(?:\*(?![*(])|[*]{3,}(?!\()|[*]{2}(?![(/]|$)|\*(?=\*\())/;var r=this.match(e);if(r){this.state.metachar=true;this.state.star=true;return t({type:"star",val:r[0]})}})).capture("slash",(function(){var t=this.position();var e=this.match(/^\//);if(e){this.state.slashes++;return t({type:"slash",val:e[0]})}})).capture("backslash",(function(){var t=this.position();var e=this.match(/^\\(?![*+?(){}[\]'"])/);if(e){var r=e[0];this.isInside("bracket")?r="\\":r.length>1&&(r="\\\\");return t({type:"backslash",val:r})}})).capture("square",(function(){if(!this.isInside("bracket")){var t=this.position();var e=this.match(/^\[([^!^\\])\]/);if(e)return t({type:"square",val:e[1]})}})).capture("bracket",(function(){var t=this.position();var e=this.match(/^(?:\[([!^]?)([^\]]+|\]-)(\]|[^*+?]+)|\[)/);if(e){var r=e[0];var a=e[1]?"^":"";var n=(e[2]||"").replace(/\\\\+/,"\\\\");var i=e[3]||"";e[2]&&n.length<e[2].length&&(r=r.replace(/\\\\+/,"\\\\"));var s=this.input.slice(0,2);if(""===n&&"\\]"===s){n+=s;this.consume(2);var o=this.input;var u=-1;var c;while(c=o[++u]){this.consume(1);if("]"===c){i=c;break}n+=c}}return t({type:"bracket",val:r,escaped:"]"!==i,negated:a,inner:n,close:i})}})).capture("text",(function(){if(!this.isInside("bracket")){var t=this.position();var e=this.match(b);if(e&&e[0])return t({type:"text",val:e[0]})}}));e&&"function"===typeof e.parsers&&e.parsers(t.parser)};function advanceTo(t,e){var r=t.charAt(0);var a={len:1,val:"",esc:""};var n=0;function advance(){if("\\"!==r){a.esc+="\\"+r;a.val+=r}r=t.charAt(++n);a.len++;if("\\"===r){advance();advance()}}while(r&&r!==e)advance();return a}function createTextRegex(t){if(g)return g;var e={contains:true,strictClose:false};var r=y.create(t,e);var a=d("^(?:[*]\\((?=.)|"+r+")",e);return g=a}m.not=x;var w=m;var k={};k=new n;var q=k;var E={};var S=E;var P=i;var O=s();var A=o;S.define=u;S.diff=c;S.extend=r;S.pick=h;S.typeOf=p;S.unique=f;S.isEmptyString=function(t){return""===String(t)||"./"===String(t)};S.isWindows=function(){return"\\"===P.sep||true===O};S.last=function(t,e){return t[t.length-(e||1)]};S.instantiate=function(t,e){var r;r="object"===S.typeOf(t)&&t.snapdragon?t.snapdragon:"object"===S.typeOf(e)&&e.snapdragon?e.snapdragon:new A(e);S.define(r,"parse",(function(t,e){var r=A.prototype.parse.call(this,t,e);r.input=t;var a=this.parser.stack.pop();if(a&&true!==this.options.strictErrors){var n=a.nodes[0];var i=a.nodes[1];if("bracket"===a.type)"["===i.val.charAt(0)&&(i.val="\\"+i.val);else{n.val="\\"+n.val;var s=n.parent.nodes[1];"star"===s.type&&(s.loose=true)}}S.define(r,"parser",this.parser);return r}));return r};S.createKey=function(t,e){if("undefined"===typeof e)return t;var r=t;for(var a in e)e.hasOwnProperty(a)&&(r+=";"+a+"="+String(e[a]));return r};S.arrayify=function(t){return"string"===typeof t?[t]:t?Array.isArray(t)?t:[t]:[]};S.isString=function(t){return"string"===typeof t};S.isRegex=function(t){return"regexp"===S.typeOf(t)};S.isObject=function(t){return"object"===S.typeOf(t)};S.escapeRegex=function(t){return t.replace(/[-[\]{}()^$|*+?.\\/\s]/g,"\\$&")};S.combineDupes=function(t,e){e=S.arrayify(e).join("|").split("|");e=e.map((function(t){return t.replace(/\\?([+*\\/])/g,"\\$1")}));var r=e.join("|");var a=new RegExp("("+r+")(?=\\1)","g");return t.replace(a,"")};S.hasSpecialChars=function(t){return/(?:(?:(^|\/)[!.])|[*?+()|[\]{}]|[+@]\()/.test(t)};S.toPosixPath=function(t){return t.replace(/\\+/g,"/")};S.unescape=function(t){return S.toPosixPath(t.replace(/\\(?=[*+?!.])/g,""))};S.stripDrive=function(t){return S.isWindows()?t.replace(/^[a-z]:[\\/]+?/i,"/"):t};S.stripPrefix=function(t){return"."!==t.charAt(0)||"/"!==t.charAt(1)&&"\\"!==t.charAt(1)?t:t.slice(2)};S.isSimpleChar=function(t){return""===t.trim()||"."===t};S.isSlash=function(t){return"/"===t||"\\/"===t||"\\"===t||"\\\\"===t};S.matchPath=function(t,e){return e&&e.contains?S.containsPattern(t,e):S.equalsPattern(t,e)};S._equals=function(t,e,r){return r===t||r===e};S._contains=function(t,e,r){return-1!==t.indexOf(r)||-1!==e.indexOf(r)};S.equalsPattern=function(t,e){var r=S.unixify(e);e=e||{};return function fn(a){var n=S._equals(a,r(a),t);if(true===n||true!==e.nocase)return n;var i=a.toLowerCase();return S._equals(i,r(i),t)}};S.containsPattern=function(t,e){var r=S.unixify(e);e=e||{};return function(a){var n=S._contains(a,r(a),t);if(true===n||true!==e.nocase)return n;var i=a.toLowerCase();return S._contains(i,r(i),t)}};S.matchBasename=function(t){return function(e){return t.test(e)||t.test(P.basename(e))}};S.identity=function(t){return t};S.value=function(t,e,r){return r&&false===r.unixify?t:r&&"function"===typeof r.unixify?r.unixify(t):e(t)};S.unixify=function(t){var e=t||{};return function(t){false!==e.stripPrefix&&(t=S.stripPrefix(t));true===e.unescape&&(t=S.unescape(t));(true===e.unixify||S.isWindows())&&(t=S.toPosixPath(t));return t}};var R={};var T=t;var $=e;var _=r;var j=l;var z=w;var C=q;var I=E;var B=1024*64;function nanomatch(t,e,r){e=I.arrayify(e);t=I.arrayify(t);var a=e.length;if(0===t.length||0===a)return[];if(1===a)return nanomatch.match(t,e[0],r);var n=false;var i=[];var s=[];var o=-1;while(++o<a){var u=e[o];if("string"===typeof u&&33===u.charCodeAt(0)){i.push.apply(i,nanomatch.match(t,u.slice(1),r));n=true}else s.push.apply(s,nanomatch.match(t,u,r))}if(n&&0===s.length)if(r&&false===r.unixify)s=t.slice();else{var c=I.unixify(r);for(var h=0;h<t.length;h++)s.push(c(t[h]))}var p=I.diff(s,i);return r&&false===r.nodupes?p:I.unique(p)}nanomatch.match=function(t,e,r){if(Array.isArray(e))throw new TypeError("expected pattern to be a string");var a=I.unixify(r);var n=memoize("match",e,r,nanomatch.matcher);var i=[];t=I.arrayify(t);var s=t.length;var o=-1;while(++o<s){var u=t[o];(u===e||n(u))&&i.push(I.value(u,a,r))}if("undefined"===typeof r)return I.unique(i);if(0===i.length){if(true===r.failglob)throw new Error('no matches found for "'+e+'"');if(true===r.nonull||true===r.nullglob)return[r.unescape?I.unescape(e):e]}r.ignore&&(i=nanomatch.not(i,r.ignore,r));return false!==r.nodupes?I.unique(i):i};nanomatch.isMatch=function(t,e,r){if("string"!==typeof t)throw new TypeError('expected a string: "'+T.inspect(t)+'"');if(I.isEmptyString(t)||I.isEmptyString(e))return false;var a=I.equalsPattern(r);if(a(t))return true;var n=memoize("isMatch",e,r,nanomatch.matcher);return n(t)};nanomatch.some=function(t,e,r){"string"===typeof t&&(t=[t]);for(var a=0;a<t.length;a++)if(1===nanomatch(t[a],e,r).length)return true;return false};nanomatch.every=function(t,e,r){"string"===typeof t&&(t=[t]);for(var a=0;a<t.length;a++)if(1!==nanomatch(t[a],e,r).length)return false;return true};nanomatch.any=function(t,e,r){if("string"!==typeof t)throw new TypeError('expected a string: "'+T.inspect(t)+'"');if(I.isEmptyString(t)||I.isEmptyString(e))return false;"string"===typeof e&&(e=[e]);for(var a=0;a<e.length;a++)if(nanomatch.isMatch(t,e[a],r))return true;return false};nanomatch.all=function(t,e,r){if("string"!==typeof t)throw new TypeError('expected a string: "'+T.inspect(t)+'"');"string"===typeof e&&(e=[e]);for(var a=0;a<e.length;a++)if(!nanomatch.isMatch(t,e[a],r))return false;return true};nanomatch.not=function(t,e,r){var a=_({},r);var n=a.ignore;delete a.ignore;t=I.arrayify(t);var i=I.diff(t,nanomatch(t,e,a));n&&(i=I.diff(i,nanomatch(t,n)));return false!==a.nodupes?I.unique(i):i};nanomatch.contains=function(t,e,r){if("string"!==typeof t)throw new TypeError('expected a string: "'+T.inspect(t)+'"');if("string"===typeof e){if(I.isEmptyString(t)||I.isEmptyString(e))return false;var a=I.equalsPattern(e,r);if(a(t))return true;var n=I.containsPattern(e,r);if(n(t))return true}var i=_({},r,{contains:true});return nanomatch.any(t,e,i)};nanomatch.matchBase=function(t,e){return!(t&&-1!==t.indexOf("/")||!e)&&(true===e.basename||true===e.matchBase)};nanomatch.matchKeys=function(t,e,r){if(!I.isObject(t))throw new TypeError("expected the first argument to be an object");var a=nanomatch(Object.keys(t),e,r);return I.pick(t,a)};nanomatch.matcher=function matcher(t,e){if(I.isEmptyString(t))return function(){return false};if(Array.isArray(t))return compose(t,e,matcher);if(t instanceof RegExp)return test(t);if(!I.isString(t))throw new TypeError("expected pattern to be an array, string or regex");if(!I.hasSpecialChars(t)){e&&true===e.nocase&&(t=t.toLowerCase());return I.matchPath(t,e)}var r=nanomatch.makeRe(t,e);if(nanomatch.matchBase(t,e))return I.matchBasename(r,e);function test(t){var r=I.equalsPattern(e);var a=I.unixify(e);return function(e){return!!r(e)||!!t.test(a(e))}}var a=test(r);I.define(a,"result",r.result);return a};nanomatch.capture=function(t,e,r){var a=nanomatch.makeRe(t,_({capture:true},r));var n=I.unixify(r);function match(){return function(t){var e=a.exec(n(t));return e?e.slice(1):null}}var i=memoize("capture",t,r,match);return i(e)};nanomatch.makeRe=function(t,e){if(t instanceof RegExp)return t;if("string"!==typeof t)throw new TypeError("expected pattern to be a string");if(t.length>B)throw new Error("expected pattern to be less than "+B+" characters");function makeRe(){var r=I.extend({wrap:false},e);var a=nanomatch.create(t,r);var n=$(a.output,r);I.define(n,"result",a);return n}return memoize("makeRe",t,e,makeRe)};nanomatch.create=function(t,e){if("string"!==typeof t)throw new TypeError("expected a string");function create(){return nanomatch.compile(nanomatch.parse(t,e),e)}return memoize("create",t,e,create)};nanomatch.parse=function(t,e){if("string"!==typeof t)throw new TypeError("expected a string");function parse(){var r=I.instantiate(null,e);z(r,e);var a=r.parse(t,e);I.define(a,"snapdragon",r);a.input=t;return a}return memoize("parse",t,e,parse)};nanomatch.compile=function(t,e){"string"===typeof t&&(t=nanomatch.parse(t,e));function compile(){var r=I.instantiate(t,e);j(r,e);return r.compile(t,e)}return memoize("compile",t.input,e,compile)};nanomatch.clearCache=function(){nanomatch.cache.__data__={}};function compose(t,e,r){var a;return memoize("compose",String(t),e,(function(){return function(n){if(!a){a=[];for(var i=0;i<t.length;i++)a.push(r(t[i],e))}var s=a.length;while(s--)if(true===a[s](n))return true;return false}}))}function memoize(t,e,r,a){var n=I.createKey(t+"="+e,r);if(r&&false===r.cache)return a(e,r);if(C.has(t,n))return C.get(t,n);var i=a(e,r);C.set(t,n,i);return i}nanomatch.compilers=j;nanomatch.parsers=z;nanomatch.cache=C;R=nanomatch;var W=R;export default W;

