// emitter@0.0.5 downloaded from https://ga.jspm.io/npm:emitter@0.0.5/dist/emitter.js

var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,r){r(t)})(t,(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(e,t,r){t&&defineProperties(e.prototype,t);r&&defineProperties(e,r);return e}}();t.Promise=Promise;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function noop(){return false};var s=10;var i=function(){function EventEmitter(){_classCallCheck(this||e,EventEmitter);(this||e)._events=(this||e)._events||{};(this||e)._maxListeners=(this||e)._maxListeners||s}r(EventEmitter,[{key:"setMaxListeners",value:function setMaxListeners(t){if("number"!==typeof t||t<0)throw TypeError("n must be a positive number");(this||e)._maxListeners=t}},{key:"emit",value:function emit(t){var r,n,s,i,o,a;(this||e)._events||((this||e)._events={});if("error"===t&&(!(this||e)._events.error||"object"===typeof(this||e)._events.error&&!(this||e)._events.error.length)){r=arguments[1];if(!(this||e).domain)throw r instanceof Error?r:TypeError('Uncaught, unspecified "error" event.');r||(r=new TypeError('Uncaught, unspecified "error" event.'));return false}n=(this||e)._events[t];if("undefined"===typeof n)return false;if("function"===typeof n)switch(arguments.length){case 1:n.call(this||e);break;case 2:n.call(this||e,arguments[1]);break;case 3:n.call(this||e,arguments[1],arguments[2]);break;default:s=arguments.length;i=new Array(s-1);for(o=1;o<s;o++)i[o-1]=arguments[o];n.apply(this||e,i)}else if("object"===typeof n){s=arguments.length;i=new Array(s-1);for(o=1;o<s;o++)i[o-1]=arguments[o];a=n.slice();s=a.length;for(o=0;o<s;o++)a[o].apply(this||e,i)}return true}},{key:"addListener",value:function addListener(t,r){var n;if("function"!==typeof r)throw TypeError("listener must be a function");(this||e)._events||((this||e)._events={});(this||e)._events.newListener&&this.emit("newListener",t,"function"===typeof r.listener?r.listener:r);(this||e)._events[t]?"object"===typeof(this||e)._events[t]?(this||e)._events[t].push(r):(this||e)._events[t]=[(this||e)._events[t],r]:(this||e)._events[t]=r;if("object"===typeof(this||e)._events[t]&&!(this||e)._events[t].warned){n=(this||e)._maxListeners;if(n&&n>0&&(this||e)._events[t].length>n){(this||e)._events[t].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",(this||e)._events[t].length);console.trace()}}return this||e}},{key:"on",value:function on(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(this||e).addListener.apply(this||e,r)}},{key:"once",value:function once(t,r){if("function"!==typeof r)throw TypeError("listener must be a function");function g(){this.removeListener(t,g);r.apply(this||e,arguments)}g.listener=r;this.on(t,g);return this||e}},{key:"removeListener",value:function removeListener(t,r){var n,s,i,o;if("function"!==typeof r)throw TypeError("listener must be a function");if(!(this||e)._events||!(this||e)._events[t])return this||e;n=(this||e)._events[t];i=n.length;s=-1;if(n===r||"function"===typeof n.listener&&n.listener===r){(this||e)._events[t]=void 0;(this||e)._events.removeListener&&this.emit("removeListener",t,r)}else if("object"===typeof n){for(o=i;o-- >0;)if(n[o]===r||n[o].listener&&n[o].listener===r){s=o;break}if(s<0)return this||e;if(1===n.length){n.length=0;(this||e)._events[t]=void 0}else n.splice(s,1);(this||e)._events.removeListener&&this.emit("removeListener",t,r)}return this||e}},{key:"removeAllListeners",value:function removeAllListeners(t){var r,n;if(!(this||e)._events)return this||e;if(!(this||e)._events.removeListener){0===arguments.length?(this||e)._events={}:(this||e)._events[t]&&((this||e)._events[t]=void 0);return this||e}if(0===arguments.length){var s=Object.keys((this||e)._events);for(var i=0;i<s.length;i++){var r=s[i];"removeListener"!==r&&this.removeAllListeners(r)}this.removeAllListeners("removeListener");(this||e)._events={};return this||e}n=(this||e)._events[t];if("function"===typeof n)this.removeListener(t,n);else while(n.length)this.removeListener(t,n[n.length-1]);(this||e)._events[t]=void 0;return this||e}},{key:"listeners",value:function listeners(t){var r;r=(this||e)._events&&(this||e)._events[t]?"function"===typeof(this||e)._events[t]?[(this||e)._events[t]]:(this||e)._events[t].slice():[];return r}}],[{key:"listenerCount",value:function listenerCount(e,t){var r;r=e._events&&e._events[t]?"function"===typeof e._events[t]?1:e._events[t].length:0;return r}},{key:"inherits",value:function inherits(e){e.super_=superCtor;e.prototype=Object.create(superCtor.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}},{key:"extend",value:function extend(e){return _extend(e,new EventEmitter,EventEmitter.prototype)}}]);return EventEmitter}();t.EventEmitter=i;function _extend(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var s=0,i=r.length;s<i;s++){var o=Object.getOwnPropertyNames(r[s]||{});var a=true;var l=false;var h=void 0;try{for(var v=o[Symbol.iterator](),u;!(a=(u=v.next()).done);a=true){var f=u.value;e[f]=r[s][f]}}catch(e){l=true;h=e}finally{try{!a&&v["return"]&&v["return"]()}finally{if(l)throw h}}}return e}var o=function(){function _Promise(){var t=arguments.length<=0||void 0===arguments[0]?n:arguments[0];_classCallCheck(this||e,_Promise);(this||e)._settled=false;(this||e)._success=false;(this||e)._args=[];(this||e)._callbacks=[];(this||e)._onReject=n;t((this||e).resolve.bind(this||e),(this||e).reject.bind(this||e))}r(_Promise,[{key:"then",value:function then(t){var r=this||e;var s=arguments.length<=1||void 0===arguments[1]?n:arguments[1];var i=new _Promise;(this||e)._onReject=s;(this||e)._callbacks.push((function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];var o=t.apply(r,n);o&&"function"==typeof o.then&&o.then(i.resolve.bind(i),i.reject.bind(i))}));(this||e)._settled&&((this||e)._success?(this||e).resolve.apply(this||e,(this||e)._args):(this||e).onReject.apply(this||e,(this||e)._args));return i}},{key:"catch",value:function _catch(t){(this||e)._onReject=t;return this||e}},{key:"resolve",value:function resolve(){var t=true;var r=false;var n=void 0;for(var s=arguments.length,i=Array(s),o=0;o<s;o++)i[o]=arguments[o];try{for(var a=(this||e)._callbacks[Symbol.iterator](),l;!(t=(l=a.next()).done);t=true){var h=l.value;h.apply(this||e,i)}}catch(e){r=true;n=e}finally{try{!t&&a["return"]&&a["return"]()}finally{if(r)throw n}}(this||e)._args=i;(this||e)._settled=true;(this||e)._success=true}},{key:"reject",value:function reject(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(this||e)._onReject.apply(this||e,r);(this||e)._args=r;(this||e)._settled=true}}]);return _Promise}();var a=("undefined"!==typeof e?e:window).Promise||null;function Promise(e){var t=null;var r=n;var s=n;e=e||n;if(a){t=new a((function(t,n){r=t;s=n;e(t,n)}));t.resolve=function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];r.apply(t,n)};t.reject=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];s.apply(t,r)}}else t=new o(e);return t}}));const r=t.__esModule,n=t.EventEmitter;const s=t.Promise;export default t;export{n as EventEmitter,s as Promise,r as __esModule};

