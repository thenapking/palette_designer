// expand-brackets@2.1.4 downloaded from https://ga.jspm.io/npm:expand-brackets@2.1.4/index.js

import t from"posix-character-classes";import r from"to-regex";import e from"regex-not";import a from"define-property";import i from"debug";import n from"extend-shallow";import s from"snapdragon";var c={};var o=t;c=function(t){t.compiler.set("escape",(function(t){return this.emit("\\"+t.val.replace(/^\\/,""),t)})).set("text",(function(t){return this.emit(t.val.replace(/([{}])/g,"\\$1"),t)})).set("posix",(function(t){if("[::]"===t.val)return this.emit("\\[::\\]",t);var r=o[t.inner];"undefined"===typeof r&&(r="["+t.inner+"]");return this.emit(r,t)})).set("bracket",(function(t){return this.mapVisit(t.nodes)})).set("bracket.open",(function(t){return this.emit(t.val,t)})).set("bracket.inner",(function(t){var r=t.val;if("["===r||"]"===r)return this.emit("\\"+t.val,t);if("^]"===r)return this.emit("^\\]",t);if("^"===r)return this.emit("^",t);/-/.test(r)&&!/(\d-\d|\w-\w)/.test(r)&&(r=r.split("-").join("\\-"));var e="^"===r.charAt(0);e&&-1===r.indexOf("/")&&(r+="/");e&&-1===r.indexOf(".")&&(r+=".");r=r.replace(/\\([1-9])/g,"$1");return this.emit(r,t)})).set("bracket.close",(function(t){var r=t.val.replace(/^\\/,"");return true===t.parent.escaped?this.emit("\\"+r,t):this.emit(r,t)}))};var p=c;var v={};var u=r;var h=e;var f;v.last=function(t){return t[t.length-1]};v.createRegex=function(t,r){if(f)return f;var e={contains:true,strictClose:false};var a=h.create(t,e);var i;i=u("string"===typeof r?"^(?:"+r+"|"+a+")":a,e);return f=i};var l={};var m=v;var b=a;var k="(\\[(?=.*\\])|\\])+";var d=m.createRegex(k);function parsers(t){t.state=t.state||{};t.parser.sets.bracket=t.parser.sets.bracket||[];t.parser.capture("escape",(function(){if(!this.isInside("bracket")){var t=this.position();var r=this.match(/^\\(.)/);if(r)return t({type:"escape",val:r[0]})}})).capture("text",(function(){if(!this.isInside("bracket")){var t=this.position();var r=this.match(d);if(r&&r[0])return t({type:"text",val:r[0]})}})).capture("posix",(function(){var r=this.position();var e=this.match(/^\[:(.*?):\](?=.*\])/);if(e){var a=this.isInside("bracket");a&&t.posix++;return r({type:"posix",insideBracket:a,inner:e[1],val:e[0]})}})).capture("bracket",(function(){})).capture("bracket.open",(function(){var t=this.parsed;var r=this.position();var e=this.match(/^\[(?=.*\])/);if(e){var a=this.prev();var i=m.last(a.nodes);if("\\"===t.slice(-1)&&!this.isInside("bracket")){i.val=i.val.slice(0,i.val.length-1);return r({type:"escape",val:e[0]})}var n=r({type:"bracket.open",val:e[0]});if("bracket.open"===i.type||this.isInside("bracket")){n.val="\\"+n.val;n.type="bracket.inner";n.escaped=true;return n}var s=r({type:"bracket",nodes:[n]});b(s,"parent",a);b(n,"parent",s);this.push("bracket",s);a.nodes.push(s)}})).capture("bracket.inner",(function(){if(this.isInside("bracket")){var t=this.position();var r=this.match(d);if(r&&r[0]){var e=this.input.charAt(0);var a=r[0];var i=t({type:"bracket.inner",val:a});if("\\\\"===a)return i;var n=a.charAt(0);var s=a.slice(-1);"!"===n&&(a="^"+a.slice(1));if("\\"===s||"^"===a&&"]"===e){a+=this.input[0];this.consume(1)}i.val=a;return i}}})).capture("bracket.close",(function(){var t=this.parsed;var r=this.position();var e=this.match(/^\]/);if(e){var a=this.prev();var i=m.last(a.nodes);if("\\"===t.slice(-1)&&!this.isInside("bracket")){i.val=i.val.slice(0,i.val.length-1);return r({type:"escape",val:e[0]})}var n=r({type:"bracket.close",rest:this.input,val:e[0]});if("bracket.open"===i.type){n.type="bracket.inner";n.escaped=true;return n}var s=this.pop("bracket");if(!this.isType(s,"bracket")){if(this.options.strict)throw new Error('missing opening "["');n.type="bracket.inner";n.escaped=true;return n}s.nodes.push(n);b(n,"parent",s)}}))}l=parsers;l.TEXT_REGEX=k;var g=l;var y={};var x=p;var w=g;var I=i("expand-brackets");var E=n;var R=s;var A=r;function brackets(t,r){I("initializing from <%s>",new URL(import.meta.url).pathname);var e=brackets.create(t,r);return e.output}brackets.match=function(t,r,e){t=[].concat(t);var a=E({},e);var i=brackets.matcher(r,a);var n=t.length;var s=-1;var c=[];while(++s<n){var o=t[s];i(o)&&c.push(o)}if(0===c.length){if(true===a.failglob)throw new Error('no matches found for "'+r+'"');if(true===a.nonull||true===a.nullglob)return[r.split("\\").join("")]}return c};brackets.isMatch=function(t,r,e){return brackets.matcher(r,e)(t)};brackets.matcher=function(t,r){var e=brackets.makeRe(t,r);return function(t){return e.test(t)}};brackets.makeRe=function(t,r){var e=brackets.create(t,r);var a=E({strictErrors:false},r);return A(e.output,a)};brackets.create=function(t,r){var e=r&&r.snapdragon||new R(r);x(e);w(e);var a=e.parse(t,r);a.input=t;var i=e.compile(a,r);i.input=t;return i};brackets.compilers=x;brackets.parsers=w;y=brackets;var T=y;export default T;

