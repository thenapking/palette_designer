// braces@2.3.2 downloaded from https://ga.jspm.io/npm:braces@2.3.2/index.js

import e from"to-regex";import t from"array-unique";import r from"extend-shallow";import a from"split-string";import i from"arr-flatten";import n from"isobject";import s from"fill-range";import p from"repeat-element";import o from"snapdragon-node";import u from"snapdragon";var l={};var c=a;var f=l;f.extend=r;f.flatten=i;f.isObject=n;f.fillRange=s;f.repeat=p;f.unique=t;f.define=function(e,t,r){Object.defineProperty(e,t,{writable:true,configurable:true,enumerable:false,value:r})};f.isEmptySets=function(e){return/^(?:\{,\})+$/.test(e)};f.isQuotedString=function(e){var t=e.charAt(0);return("'"===t||'"'===t||"`"===t)&&e.slice(-1)===t};f.createKey=function(e,t){var r=e;if("undefined"===typeof t)return r;var a=Object.keys(t);for(var i=0;i<a.length;i++){var n=a[i];r+=";"+n+"="+String(t[n])}return r};f.createOptions=function(e){var t=f.extend.apply(null,arguments);"boolean"===typeof t.expand&&(t.optimize=!t.expand);"boolean"===typeof t.optimize&&(t.expand=!t.optimize);true===t.optimize&&(t.makeRe=true);return t};f.join=function(e,t,r){r=r||{};e=f.arrayify(e);t=f.arrayify(t);if(!e.length)return t;if(!t.length)return e;var a=e.length;var i=-1;var n=[];while(++i<a){var s=e[i];if(Array.isArray(s)){for(var p=0;p<s.length;p++)s[p]=f.join(s[p],t,r);n.push(s)}else for(var o=0;o<t.length;o++){var u=t[o];Array.isArray(u)?n.push(f.join(s,u,r)):n.push(s+u)}}return n};f.split=function(e,t){var r=f.extend({sep:","},t);"boolean"!==typeof r.keepQuotes&&(r.keepQuotes=true);false===r.unescape&&(r.keepEscaping=true);return c(e,r,f.escapeBrackets(r))};f.expand=function(e,t){var r=f.extend({rangeLimit:1e4},t);var a=f.split(e,r);var i={segs:a};if(f.isQuotedString(e))return i;true===r.rangeLimit&&(r.rangeLimit=1e4);if(a.length>1){if(false===r.optimize){i.val=a[0];return i}i.segs=f.stringifyArray(i.segs)}else if(1===a.length){var n=e.split("..");if(1===n.length){i.val=i.segs[i.segs.length-1]||i.val||e;i.segs=[];return i}if(2===n.length&&n[0]===n[1]){i.escaped=true;i.val=n[0];i.segs=[];return i}if(n.length>1){if(false!==r.optimize){r.optimize=true;delete r.expand}if(true!==r.optimize){var s=Math.min(n[0],n[1]);var p=Math.max(n[0],n[1]);var o=n[2]||1;if(false!==r.rangeLimit&&(p-s)/o>=r.rangeLimit)throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.")}n.push(r);i.segs=f.fillRange.apply(null,n);if(!i.segs.length){i.escaped=true;i.val=e;return i}true===r.optimize&&(i.segs=f.stringifyArray(i.segs));""===i.segs?i.val=e:i.val=i.segs[0];return i}}else i.val=e;return i};f.escapeBrackets=function(e){return function(t){if(t.escaped&&"b"===t.val)t.val="\\b";else if("("===t.val||"["===t.val){var r=f.extend({},e);var a=[];var i=[];var n=[];var s=t.val;var p=t.str;var o=t.idx-1;while(++o<p.length){var u=p[o];if("\\"!==u){if("("===u){i.push(u);n.push(u)}if("["===u){a.push(u);n.push(u)}if(")"===u){i.pop();n.pop();if(!n.length){s+=u;break}}if("]"===u){a.pop();n.pop();if(!n.length){s+=u;break}}s+=u}else s+=(false===r.keepEscaping?"":u)+p[++o]}t.split=false;t.val=s.slice(1);t.idx=o}}};f.isQuantifier=function(e){return/^(?:[0-9]?,[0-9]|[0-9],)$/.test(e)};f.stringifyArray=function(e){return[f.arrayify(e).join("|")]};f.arrayify=function(e){return"undefined"===typeof e?[]:"string"===typeof e?[e]:e};f.isString=function(e){return null!=e&&"string"===typeof e};f.last=function(e,t){return e[e.length-(t||1)]};f.escapeRegex=function(e){return e.replace(/\\?([!^*?()[\]{}+?/])/g,"\\$1")};var v={};var h=l;v=function(e,t){e.compiler.set("bos",(function(){if(!this.output){this.ast.queue=isEscaped(this.ast)?[this.ast.val]:[];this.ast.count=1}})).set("bracket",(function(e){var t=e.close;var r=e.escaped?"\\[":"[";var a=e.negated;var i=e.inner;i=i.replace(/\\(?=[\\\w]|$)/g,"\\\\");"]-"===i&&(i="\\]\\-");a&&-1===i.indexOf(".")&&(i+=".");a&&-1===i.indexOf("/")&&(i+="/");var n=r+a+i+t;var s=e.parent.queue;var p=h.arrayify(s.pop());s.push(h.join(p,n));s.push.apply(s,[])})).set("brace",(function(e){e.queue=isEscaped(e)?[e.val]:[];e.count=1;return this.mapVisit(e.nodes)})).set("brace.open",(function(e){e.parent.open=e.val})).set("text",(function(e){var r=e.parent.queue;var a=e.escaped;var i=[e.val];false===e.optimize&&(t=h.extend({},t,{optimize:false}));e.multiplier>1&&(e.parent.count*=e.multiplier);if(true===t.quantifiers&&h.isQuantifier(e.val))a=true;else if(e.val.length>1){if(isType(e.parent,"brace")&&!isEscaped(e)){var n=h.expand(e.val,t);i=n.segs;n.isOptimized&&(e.parent.isOptimized=true);if(!i.length){var s=n.val||e.val;if(false!==t.unescape){s=s.replace(/\\([,.])/g,"$1");s=s.replace(/["'`]/g,"")}i=[s];a=true}}}else if(","===e.val)if(t.expand){e.parent.queue.push([""]);i=[""]}else i=["|"];else a=true;a&&isType(e.parent,"brace")&&(e.parent.nodes.length<=4&&1===e.parent.count||e.parent.length<=3)&&(e.parent.escaped=true);if(hasQueue(e.parent)){var p=h.arrayify(r.pop());if(e.parent.count>1&&t.expand){p=multiply(p,e.parent.count);e.parent.count=1}r.push(h.join(h.flatten(p),i.shift()));r.push.apply(r,i)}else e.parent.queue=i})).set("brace.close",(function(e){var r=e.parent.queue;var a=e.parent.parent;var i=a.queue.pop();var n=e.parent.open;var s=e.val;if(n&&s&&isOptimized(e,t)){n="(";s=")"}var p=h.last(r);if(e.parent.count>1&&t.expand){p=multiply(r.pop(),e.parent.count);e.parent.count=1;r.push(p)}if(s&&"string"===typeof p&&1===p.length){n="";s=""}if((isLiteralBrace(e,t)||noInner(e))&&!e.parent.hasEmpty){r.push(h.join(n,r.pop()||""));r=h.flatten(h.join(r,s))}"undefined"===typeof i?a.queue=[r]:a.queue.push(h.flatten(h.join(i,r)))})).set("eos",(function(e){if(!this.input){false!==t.optimize?this.output=h.last(h.flatten(this.ast.queue)):Array.isArray(h.last(this.ast.queue))?this.output=h.flatten(this.ast.queue.pop()):this.output=h.flatten(this.ast.queue);e.parent.count>1&&t.expand&&(this.output=multiply(this.output,e.parent.count));this.output=h.arrayify(this.output);this.ast.queue=[]}}))};function multiply(e,t,r){return h.flatten(h.repeat(h.arrayify(e),t))}function isEscaped(e){return true===e.escaped}function isOptimized(e,t){return!!e.parent.isOptimized||isType(e.parent,"brace")&&!isEscaped(e.parent)&&true!==t.expand}function isLiteralBrace(e,t){return isEscaped(e.parent)||false!==t.optimize}function noInner(e,t){if(1===e.parent.queue.length)return true;var r=e.parent.nodes;return 3===r.length&&isType(r[0],"brace.open")&&!isType(r[1],"text")&&isType(r[2],"brace.close")}function isType(e,t){return"undefined"!==typeof e&&e.type===t}function hasQueue(e){return Array.isArray(e.queue)&&e.queue.length}var d=v;var m={};var g=o;var y=l;m=function(e,t){e.parser.set("bos",(function(){this.parsed||(this.ast=this.nodes[0]=new g(this.ast))})).set("escape",(function(){var e=this.position();var r=this.match(/^(?:\\(.)|\$\{)/);if(r){var a=this.prev();var i=y.last(a.nodes);var n=e(new g({type:"text",multiplier:1,val:r[0]}));if("\\\\"===n.val)return n;if("${"===n.val){var s=this.input;var p=-1;var o;while(o=s[++p]){this.consume(1);n.val+=o;if("\\"!==o){if("}"===o)break}else n.val+=s[++p]}}false!==this.options.unescape&&(n.val=n.val.replace(/\\([{}])/g,"$1"));if('"'!==i.val||'"'!==this.input.charAt(0))return concatNodes.call(this,e,n,a,t);i.val=n.val;this.consume(1)}})).set("bracket",(function(){var e=this.isInside("brace");var t=this.position();var r=this.match(/^(?:\[([!^]?)([^\]]{2,}|\]-)(\]|[^*+?]+)|\[)/);if(r){var a=this.prev();var i=r[0];var n=r[1]?"^":"";var s=r[2]||"";var p=r[3]||"";if(e&&"brace"===a.type){a.text=a.text||"";a.text+=i}var o=this.input.slice(0,2);if(""===s&&"\\]"===o){s+=o;this.consume(2);var u=this.input;var l=-1;var c;while(c=u[++l]){this.consume(1);if("]"===c){p=c;break}s+=c}}return t(new g({type:"bracket",val:i,escaped:"]"!==p,negated:n,inner:s,close:p}))}})).set("multiplier",(function(){var e=this.isInside("brace");var r=this.position();var a=this.match(/^\{((?:,|\{,+\})+)\}/);if(a){this.multiplier=true;var i=this.prev();var n=a[0];if(e&&"brace"===i.type){i.text=i.text||"";i.text+=n}var s=r(new g({type:"text",multiplier:1,match:a,val:n}));return concatNodes.call(this,r,s,i,t)}})).set("brace.open",(function(){var e=this.position();var t=this.match(/^\{(?!(?:[^\\}]?|,+)\})/);if(t){var r=this.prev();var a=y.last(r.nodes);a&&a.val&&isExtglobChar(a.val.slice(-1))&&(a.optimize=false);var i=e(new g({type:"brace.open",val:t[0]}));var n=e(new g({type:"brace",nodes:[]}));n.push(i);r.push(n);this.push("brace",n)}})).set("brace.close",(function(){var e=this.position();var t=this.match(/^\}/);if(t&&t[0]){var r=this.pop("brace");var a=e(new g({type:"brace.close",val:t[0]}));if(!this.isType(r,"brace")){if(this.options.strict)throw new Error('missing opening "{"');a.type="text";a.multiplier=0;a.escaped=true;return a}var i=this.prev();var n=y.last(i.nodes);if(n.text){var s=y.last(n.nodes);if(")"===s.val&&/[!@*?+]\(/.test(n.text)){var p=n.nodes[0];var o=n.nodes[1];"brace.open"===p.type&&o&&"text"===o.type&&(o.optimize=false)}}if(r.nodes.length>2){var u=r.nodes[1];if("text"===u.type&&","===u.val){r.nodes.splice(1,1);r.nodes.push(u)}}r.push(a)}})).set("boundary",(function(){var e=this.position();var t=this.match(/^[$^](?!\{)/);if(t)return e(new g({type:"text",val:t[0]}))})).set("nobrace",(function(){var e=this.isInside("brace");var t=this.position();var r=this.match(/^\{[^,]?\}/);if(r){var a=this.prev();var i=r[0];if(e&&"brace"===a.type){a.text=a.text||"";a.text+=i}return t(new g({type:"text",multiplier:0,val:i}))}})).set("text",(function(){var e=this.isInside("brace");var r=this.position();var a=this.match(/^((?!\\)[^${}[\]])+/);if(a){var i=this.prev();var n=a[0];if(e&&"brace"===i.type){i.text=i.text||"";i.text+=n}var s=r(new g({type:"text",multiplier:1,val:n}));return concatNodes.call(this,r,s,i,t)}}))};function isExtglobChar(e){return"!"===e||"@"===e||"*"===e||"?"===e||"+"===e}function concatNodes(e,t,r,a){t.orig=t.val;var i=this.prev();var n=y.last(i.nodes);var s=false;if(t.val.length>1){var p=t.val.charAt(0);var o=t.val.slice(-1);s='"'===p&&'"'===o||"'"===p&&"'"===o||"`"===p&&"`"===o}if(s&&false!==a.unescape){t.val=t.val.slice(1,t.val.length-1);t.escaped=true}if(t.match){var u=t.match[1];u&&-1!==u.indexOf("}")||(u=t.match[0]);var l=u.replace(/\{/g,",").replace(/\}/g,"");t.multiplier*=l.length;t.val=""}var c="text"===n.type&&1===n.multiplier&&1===t.multiplier&&t.val;c?n.val+=t.val:i.push(t)}var b=m;var x={};var w=r;var z=u;var q=d;var k=b;var E=l;function Braces(e){this.options=w({},e)}Braces.prototype.init=function(e){if(!this.isInitialized){this.isInitialized=true;var t=E.createOptions({},this.options,e);this.snapdragon=this.options.snapdragon||new z(t);this.compiler=this.snapdragon.compiler;this.parser=this.snapdragon.parser;q(this.snapdragon,t);k(this.snapdragon,t);E.define(this.snapdragon,"parse",(function(e,t){var r=z.prototype.parse.apply(this,arguments);this.parser.ast.input=e;var a=this.parser.stack;while(a.length)addParent({type:"brace.close",val:""},a.pop());function addParent(e,t){E.define(e,"parent",t);t.nodes.push(e)}E.define(r,"parser",this.parser);return r}))}};Braces.prototype.parse=function(e,t){if(e&&"object"===typeof e&&e.nodes)return e;this.init(t);return this.snapdragon.parse(e,t)};Braces.prototype.compile=function(e,t){"string"===typeof e?e=this.parse(e,t):this.init(t);return this.snapdragon.compile(e,t)};Braces.prototype.expand=function(e){var t=this.parse(e,{expand:true});return this.compile(t,{expand:true})};Braces.prototype.optimize=function(e){var t=this.parse(e,{optimize:true});return this.compile(t,{optimize:true})};x=Braces;var A=x;var O={};var j=e;var B=t;var L=r;var T=d;var $=b;var Q=A;var R=l;var I=1024*64;var S={};function braces(e,t){var r=R.createKey(String(e),t);var a=[];var i=t&&false===t.cache;if(!i&&S.hasOwnProperty(r))return S[r];if(Array.isArray(e))for(var n=0;n<e.length;n++)a.push.apply(a,braces.create(e[n],t));else a=braces.create(e,t);t&&true===t.nodupes&&(a=B(a));i||(S[r]=a);return a}braces.expand=function(e,t){return braces.create(e,L({},t,{expand:true}))};braces.optimize=function(e,t){return braces.create(e,t)};braces.create=function(e,t){if("string"!==typeof e)throw new TypeError("expected a string");var r=t&&t.maxLength||I;if(e.length>=r)throw new Error("expected pattern to be less than "+r+" characters");function create(){if(""===e||e.length<3)return[e];if(R.isEmptySets(e))return[];if(R.isQuotedString(e))return[e.slice(1,-1)];var r=new Q(t);var a=t&&true===t.expand?r.expand(e,t):r.optimize(e,t);var i=a.output;t&&true===t.noempty&&(i=i.filter(Boolean));t&&true===t.nodupes&&(i=B(i));Object.defineProperty(i,"result",{enumerable:false,value:a});return i}return memoize("create",e,t,create)};braces.makeRe=function(e,t){if("string"!==typeof e)throw new TypeError("expected a string");var r=t&&t.maxLength||I;if(e.length>=r)throw new Error("expected pattern to be less than "+r+" characters");function makeRe(){var r=braces(e,t);var a=L({strictErrors:false},t);return j(r,a)}return memoize("makeRe",e,t,makeRe)};braces.parse=function(e,t){var r=new Q(t);return r.parse(e,t)};braces.compile=function(e,t){var r=new Q(t);return r.compile(e,t)};braces.clearCache=function(){S=braces.cache={}};function memoize(e,t,r,a){var i=R.createKey(e+":"+t,r);var n=r&&false===r.cache;if(n){braces.clearCache();return a(t,r)}if(S.hasOwnProperty(i))return S[i];var s=a(t,r);S[i]=s;return s}braces.Braces=Q;braces.compilers=T;braces.parsers=$;braces.cache=S;O=braces;var P=O;export default P;

