// cors@2.8.5 downloaded from https://ga.jspm.io/npm:cors@2.8.5/lib/index.js

import e from"object-assign";import r from"vary";var n={};(function(){var i=e;var o=r;var s={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:false,optionsSuccessStatus:204};function isString(e){return"string"===typeof e||e instanceof String}function isOriginAllowed(e,r){if(Array.isArray(r)){for(var n=0;n<r.length;++n)if(isOriginAllowed(e,r[n]))return true;return false}return isString(r)?e===r:r instanceof RegExp?r.test(e):!!r}function configureOrigin(e,r){var n=r.headers.origin,i=[],o;if(e.origin&&"*"!==e.origin)if(isString(e.origin)){i.push([{key:"Access-Control-Allow-Origin",value:e.origin}]);i.push([{key:"Vary",value:"Origin"}])}else{o=isOriginAllowed(n,e.origin);i.push([{key:"Access-Control-Allow-Origin",value:!!o&&n}]);i.push([{key:"Vary",value:"Origin"}])}else i.push([{key:"Access-Control-Allow-Origin",value:"*"}]);return i}function configureMethods(e){var r=e.methods;r.join&&(r=e.methods.join(","));return{key:"Access-Control-Allow-Methods",value:r}}function configureCredentials(e){return true===e.credentials?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function configureAllowedHeaders(e,r){var n=e.allowedHeaders||e.headers;var i=[];if(n)n.join&&(n=n.join(","));else{n=r.headers["access-control-request-headers"];i.push([{key:"Vary",value:"Access-Control-Request-Headers"}])}n&&n.length&&i.push([{key:"Access-Control-Allow-Headers",value:n}]);return i}function configureExposedHeaders(e){var r=e.exposedHeaders;if(!r)return null;r.join&&(r=r.join(","));return r&&r.length?{key:"Access-Control-Expose-Headers",value:r}:null}function configureMaxAge(e){var r=("number"===typeof e.maxAge||e.maxAge)&&e.maxAge.toString();return r&&r.length?{key:"Access-Control-Max-Age",value:r}:null}function applyHeaders(e,r){for(var n=0,i=e.length;n<i;n++){var s=e[n];s&&(Array.isArray(s)?applyHeaders(s,r):"Vary"===s.key&&s.value?o(r,s.value):s.value&&r.setHeader(s.key,s.value))}}function cors(e,r,n,i){var o=[],s=r.method&&r.method.toUpperCase&&r.method.toUpperCase();if("OPTIONS"===s){o.push(configureOrigin(e,r));o.push(configureCredentials(e,r));o.push(configureMethods(e,r));o.push(configureAllowedHeaders(e,r));o.push(configureMaxAge(e,r));o.push(configureExposedHeaders(e,r));applyHeaders(o,n);if(e.preflightContinue)i();else{n.statusCode=e.optionsSuccessStatus;n.setHeader("Content-Length","0");n.end()}}else{o.push(configureOrigin(e,r));o.push(configureCredentials(e,r));o.push(configureExposedHeaders(e,r));applyHeaders(o,n);i()}}function middlewareWrapper(e){var r=null;r="function"===typeof e?e:function(r,n){n(null,e)};return function corsMiddleware(e,n,o){r(e,(function(r,t){if(r)o(r);else{var u=i({},s,t);var a=null;u.origin&&"function"===typeof u.origin?a=u.origin:u.origin&&(a=function(e,r){r(null,u.origin)});a?a(e.headers.origin,(function(r,i){if(r||!i)o(r);else{u.origin=i;cors(u,e,n,o)}})):o()}}))}}n=middlewareWrapper})();var i=n;export default i;

